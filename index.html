<!doctype html>
<html lang="en">
<head>
	<title>CORS Demo</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
	<h1></h1>
	<div class="container-fluid">
		<div class="card" style="width: 18rem;">
		  <div class="card-body">
		    <h5 class="card-title">CORS Demo</h5>
		    <p class="card-text">Simple example to send a cross domain http request</p>
		    <button id="login" type="button" class="btn btn-primary">Login</button>
		    <p id="token" class="card-text"></p>
		  </div>
		</div>
	</div>
</body>

<script>
	$('#login').on('click', function(event) {
		console.log("Logging in...");

		$.ajax({
			type: 'GET',
			url: 'https://cors-springboot-solution-demo.herokuapp.com/login',
			contentType: 'text/plain',

			xhrFields: {
				withCredentials: false
			},

			headers: {
				"Authorization": "Bearer Token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
			},

			success: function(data) {
				console.log(data);
				$('#token').html(data);
			},

			error: function() {
				console.log("Error");
				$('#token').html("Something went wrong.");
			}
		});
	});

</script>

</html>